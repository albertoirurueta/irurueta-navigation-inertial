<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>BodyKinematicsSequence.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">com.irurueta:irurueta-navigation-inertial</a> &gt; <a href="index.source.html" class="el_package">com.irurueta.navigation.inertial.calibration</a> &gt; <span class="el_source">BodyKinematicsSequence.java</span></div><h1>BodyKinematicsSequence.java</h1><pre class="source lang-java linenums">/*
 * Copyright (C) 2020 Alberto Irurueta Carro (alberto@irurueta.com)
 *
 * Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *         http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
package com.irurueta.navigation.inertial.calibration;

import com.irurueta.units.Acceleration;
import com.irurueta.units.AccelerationConverter;
import com.irurueta.units.AccelerationUnit;

import java.io.Serial;
import java.io.Serializable;
import java.util.ArrayList;
import java.util.List;
import java.util.Objects;

/**
 * Contains a collection of items containing body kinematics
 * measurements ordered by the timestamp when the measurement was made.
 * Measurements within a sequence will be made while the device is
 * being moved.
 * Samples between sequences will be ignored because it will be assumed
 * that the device will be static.
 * Hence, during static periods, only the mean accelerations will be measured.
 * The mean accelerations during static periods will approximately match the
 * gravity versor expressed in body coordinates.
 *
 * @param &lt;T&gt; a type of {@link TimedBodyKinematics}.
 */
public class BodyKinematicsSequence&lt;T extends TimedBodyKinematics&gt; implements Serializable, Cloneable {

    /**
     * Serialization version. This is used to ensure compatibility of deserialization of permanently stored serialized
     * instances.
     */
    @Serial
    private static final long serialVersionUID = 0L;

    /**
     * List of items.
     * If items are provided unsorted, they are reordered by timestamp on
     * getter method.
     */
    private ArrayList&lt;T&gt; items;

    /**
     * Contains sorted list of items.
     * This list is kept for performance reasons to reduce the amount of
     * required sorting.
     */
    private ArrayList&lt;T&gt; sortedItems;

    /**
     * X-coordinate of mean specific force during the static period happening
     * right before this sequence was measured. Expressed in meters per
     * squared second (m/s^2).
     */
    private double beforeMeanFx;

    /**
     * Y-coordinate of mean specific force during the static period happening
     * right before this sequence was measured. Expressed in meters per
     * squared second (m/s^2).
     */
    private double beforeMeanFy;

    /**
     * Z-coordinate of mean specific force during the static period happening
     * right before this sequence was measured. Expressed in meters per
     * squared second (m/s^2).
     */
    private double beforeMeanFz;

    /**
     * X-coordinate of mean specific force during the static period happening
     * right after this sequence was measured. Expressed in meters per squared
     * second (m/s^2).
     */
    private double afterMeanFx;

    /**
     * Y-coordinate of mean specific force during the static period happening
     * right after this sequence was measured. Expressed in meters per squared
     * second (m/s^2).
     */
    private double afterMeanFy;

    /**
     * Z-coordinate of mean specific force during the static period happening
     * right after this sequence was measured. Expressed in meters per squared
     * second (m/s^2).
     */
    private double afterMeanFz;

    /**
     * Constructor.
     */
<span class="fc" id="L109">    public BodyKinematicsSequence() {</span>
<span class="fc" id="L110">    }</span>

    /**
     * Constructor.
     *
     * @param items list of items containing body kinematics to be kept into
     *              this sequence.
     */
<span class="fc" id="L118">    public BodyKinematicsSequence(final List&lt;T&gt; items) {</span>
<span class="fc" id="L119">        setItems(items);</span>
<span class="fc" id="L120">    }</span>

    /**
     * Constructor.
     *
     * @param beforeMeanFx x-coordinate of mean specific force during the static
     *                     period happening right before this sequence was measured.
     *                     Expressed in meters per squared second (m/s^2).
     * @param beforeMeanFy y-coordinate of mean specific force during the static
     *                     period happening right before this sequence was measured.
     *                     Expressed in meters per squared second (m/s^2).
     * @param beforeMeanFz z-coordinate of mean specific force during the static
     *                     period happening right before this sequence was measured.
     *                     Expressed in meters per squared second (m/s^2).
     * @param afterMeanFx  x-coordinate of mean specific force during the static
     *                     period happening right after this sequence was measured.
     *                     Expressed in meters per squared second (m/s^2).
     * @param afterMeanFy  y-coordinate of mean specific force during the static
     *                     period happening right after this sequence was measured.
     *                     Expressed in meters per squared second (m/s^2).
     * @param afterMeanFz  z-coordinate of mean specific force during the static
     *                     period happening right after this sequence was measured.
     *                     Expressed in meters per squared second (m/s^2).
     */
    public BodyKinematicsSequence(
            final double beforeMeanFx, final double beforeMeanFy, final double beforeMeanFz,
<span class="fc" id="L146">            final double afterMeanFx, final double afterMeanFy, final double afterMeanFz) {</span>
<span class="fc" id="L147">        setBeforeMeanSpecificForceCoordinates(beforeMeanFx, beforeMeanFy, beforeMeanFz);</span>
<span class="fc" id="L148">        setAfterMeanSpecificForceCoordinates(afterMeanFx, afterMeanFy, afterMeanFz);</span>
<span class="fc" id="L149">    }</span>

    /**
     * Constructor.
     *
     * @param beforeMeanSpecificForceX x-coordinate of mean specific force during
     *                                 the static period happening right before this
     *                                 sequence was measured.
     * @param beforeMeanSpecificForceY y-coordinate of mean specific force during
     *                                 the static period happening right before this
     *                                 sequence was measured.
     * @param beforeMeanSpecificForceZ z-coordinate of mean specific force during
     *                                 the static period happening right before this
     *                                 sequence was measured.
     * @param afterMeanSpecificForceX  x-coordinate of mean specific force during
     *                                 the static period happening right after this
     *                                 sequence was measured.
     * @param afterMeanSpecificForceY  y-coordinate of mean specific force during
     *                                 the static period happening right after this
     *                                 sequence was measured.
     * @param afterMeanSpecificForceZ  z-coordinate of mean specific force during
     *                                 the static period happening right after this
     *                                 sequence was measured.
     */
    public BodyKinematicsSequence(
            final Acceleration beforeMeanSpecificForceX,
            final Acceleration beforeMeanSpecificForceY,
            final Acceleration beforeMeanSpecificForceZ,
            final Acceleration afterMeanSpecificForceX,
            final Acceleration afterMeanSpecificForceY,
<span class="fc" id="L179">            final Acceleration afterMeanSpecificForceZ) {</span>
<span class="fc" id="L180">        setBeforeMeanSpecificForceCoordinates(</span>
                beforeMeanSpecificForceX, beforeMeanSpecificForceY, beforeMeanSpecificForceZ);
<span class="fc" id="L182">        setAfterMeanSpecificForceCoordinates(</span>
                afterMeanSpecificForceX, afterMeanSpecificForceY, afterMeanSpecificForceZ);
<span class="fc" id="L184">    }</span>

    /**
     * @param items        list of items containing body kinematics to be kept into
     *                     this sequence.
     * @param beforeMeanFx x-coordinate of mean specific force during the static
     *                     period happening right before this sequence was measured.
     *                     Expressed in meters per squared second (m/s^2).
     * @param beforeMeanFy y-coordinate of mean specific force during the static
     *                     period happening right before this sequence was measured.
     *                     Expressed in meters per squared second (m/s^2).
     * @param beforeMeanFz z-coordinate of mean specific force during the static
     *                     period happening right before this sequence was measured.
     *                     Expressed in meters per squared second (m/s^2).
     * @param afterMeanFx  x-coordinate of mean specific force during the static
     *                     period happening right after this sequence was measured.
     *                     Expressed in meters per squared second (m/s^2).
     * @param afterMeanFy  y-coordinate of mean specific force during the static
     *                     period happening right after this sequence was measured.
     *                     Expressed in meters per squared second (m/s^2).
     * @param afterMeanFz  z-coordinate of mean specific force during the static
     *                     period happening right after this sequence was measured.
     *                     Expressed in meters per squared second (m/s^2).
     */
    public BodyKinematicsSequence(
            final List&lt;T&gt; items, final double beforeMeanFx, final double beforeMeanFy, final double beforeMeanFz,
            final double afterMeanFx, final double afterMeanFy, final double afterMeanFz) {
<span class="fc" id="L211">        this(items);</span>
<span class="fc" id="L212">        setBeforeMeanSpecificForceCoordinates(beforeMeanFx, beforeMeanFy, beforeMeanFz);</span>
<span class="fc" id="L213">        setAfterMeanSpecificForceCoordinates(afterMeanFx, afterMeanFy, afterMeanFz);</span>
<span class="fc" id="L214">    }</span>

    /**
     * Constructor.
     *
     * @param items                    list of items containing body kinematics to be kept into
     *                                 this sequence.
     * @param beforeMeanSpecificForceX x-coordinate of mean specific force during
     *                                 the static period happening right before this
     *                                 sequence was measured.
     * @param beforeMeanSpecificForceY y-coordinate of mean specific force during
     *                                 the static period happening right before this
     *                                 sequence was measured.
     * @param beforeMeanSpecificForceZ z-coordinate of mean specific force during
     *                                 the static period happening right before this
     *                                 sequence was measured.
     * @param afterMeanSpecificForceX  x-coordinate of mean specific force during
     *                                 the static period happening right after this
     *                                 sequence was measured.
     * @param afterMeanSpecificForceY  y-coordinate of mean specific force during
     *                                 the static period happening right after this
     *                                 sequence was measured.
     * @param afterMeanSpecificForceZ  z-coordinate of mean specific force during
     *                                 the static period happening right after this
     *                                 sequence was measured.
     */
    public BodyKinematicsSequence(
            final List&lt;T&gt; items,
            final Acceleration beforeMeanSpecificForceX,
            final Acceleration beforeMeanSpecificForceY,
            final Acceleration beforeMeanSpecificForceZ,
            final Acceleration afterMeanSpecificForceX,
            final Acceleration afterMeanSpecificForceY,
            final Acceleration afterMeanSpecificForceZ) {
<span class="fc" id="L248">        this(items);</span>
<span class="fc" id="L249">        setBeforeMeanSpecificForceCoordinates(</span>
                beforeMeanSpecificForceX, beforeMeanSpecificForceY, beforeMeanSpecificForceZ);
<span class="fc" id="L251">        setAfterMeanSpecificForceCoordinates(</span>
                afterMeanSpecificForceX, afterMeanSpecificForceY, afterMeanSpecificForceZ);
<span class="fc" id="L253">    }</span>

    /**
     * Constructor.
     *
     * @param input instance to copy data from.
     */
<span class="fc" id="L260">    public BodyKinematicsSequence(final BodyKinematicsSequence&lt;T&gt; input) {</span>
<span class="fc" id="L261">        copyFrom(input);</span>
<span class="fc" id="L262">    }</span>

    /**
     * Gets items in this sequence ordered by ascending timestamp.
     *
     * @param result instance where sorted items will be stored.
     * @return true if sorted items could be retrieved, false if no items
     * are available.
     */
    public boolean getSortedItems(final List&lt;T&gt; result) {
        // already sorted items are available.
<span class="fc bfc" id="L273" title="All 2 branches covered.">        if (sortedItems != null) {</span>
<span class="fc" id="L274">            result.clear();</span>
<span class="fc" id="L275">            result.addAll(sortedItems);</span>
<span class="fc" id="L276">            return true;</span>
        }

<span class="fc bfc" id="L279" title="All 2 branches covered.">        if (items != null) {</span>
<span class="fc" id="L280">            sortedItems = new ArrayList&lt;&gt;(items);</span>
<span class="fc" id="L281">            sortedItems.sort((o1, o2) -&gt; {</span>
<span class="fc" id="L282">                final var t1 = o1.getTimestampSeconds();</span>
<span class="fc" id="L283">                final var t2 = o2.getTimestampSeconds();</span>
<span class="fc" id="L284">                return Double.compare(t1, t2);</span>
            });

<span class="fc" id="L287">            result.clear();</span>
<span class="fc" id="L288">            result.addAll(sortedItems);</span>
<span class="fc" id="L289">            return true;</span>
        }

<span class="fc" id="L292">        return false;</span>
    }

    /**
     * Gets items in this sequence ordered by ascending timestamp.
     *
     * @return a new list containing sorted items or null if sorted items
     * could not be retrieved..
     */
    public List&lt;T&gt; getSortedItems() {
<span class="fc" id="L302">        final var result = new ArrayList&lt;T&gt;();</span>
<span class="fc bfc" id="L303" title="All 2 branches covered.">        if (getSortedItems(result)) {</span>
<span class="fc" id="L304">            return result;</span>
        } else {
<span class="fc" id="L306">            return null;</span>
        }
    }

    /**
     * Sets list of items containing body kinematics to be kept into this
     * sequence.
     *
     * @param items items to be kept.
     */
    public void setItems(final List&lt;T&gt; items) {
<span class="fc bfc" id="L317" title="All 2 branches covered.">        if (items instanceof ArrayList) {</span>
<span class="fc" id="L318">            this.items = (ArrayList&lt;T&gt;) items;</span>
        } else {
<span class="fc" id="L320">            this.items = new ArrayList&lt;&gt;(items);</span>
        }
<span class="fc" id="L322">        sortedItems = null;</span>
<span class="fc" id="L323">    }</span>

    /**
     * Gets number of items in this sequence.
     *
     * @return number of items in this sequence.
     */
    public int getItemsCount() {
<span class="fc bfc" id="L331" title="All 2 branches covered.">        return items != null ? items.size() : 0;</span>
    }

    /**
     * Gets x-coordinate of mean specific force during the static period
     * happening right before this sequence was measured. Expressed in
     * meters per squared second (m/s^2).
     *
     * @return x-coordinate of mean specific force.
     */
    public double getBeforeMeanFx() {
<span class="fc" id="L342">        return beforeMeanFx;</span>
    }

    /**
     * Sets x-coordinate of mean specific force during the static period
     * happening right before this sequence was measured. Expressed in
     * meters per squared second (m/s^2).
     *
     * @param beforeMeanFx x-coordinate of mean specific force.
     */
    public void setBeforeMeanFx(final double beforeMeanFx) {
<span class="fc" id="L353">        this.beforeMeanFx = beforeMeanFx;</span>
<span class="fc" id="L354">    }</span>

    /**
     * Gets y-coordinate of mean specific force during the static period
     * happening right before this sequence was measured. Expressed in
     * meters per squared second (m/s^2).
     *
     * @return y-coordinate of mean specific force.
     */
    public double getBeforeMeanFy() {
<span class="fc" id="L364">        return beforeMeanFy;</span>
    }

    /**
     * Sets y-coordinate of mean specific force during the static period
     * happening right before this sequence was measured. Expressed in
     * meters per squared second (m/s^2).
     *
     * @param beforeMeanFy y-coordinate of mean specific force.
     */
    public void setBeforeMeanFy(final double beforeMeanFy) {
<span class="fc" id="L375">        this.beforeMeanFy = beforeMeanFy;</span>
<span class="fc" id="L376">    }</span>

    /**
     * Gets z-coordinate of mean specific force during the static period
     * happening right before this sequence was measured. Expressed in
     * meters per squared second (m/s^2).
     *
     * @return z-coordinate of mean specific force.
     */
    public double getBeforeMeanFz() {
<span class="fc" id="L386">        return beforeMeanFz;</span>
    }

    /**
     * Sets z-coordinate of mean specific force during the static period
     * happening right before this sequence was measured. Expressed in
     * meters per squared second (m/s^2).
     *
     * @param beforeMeanFz z-coordinate of mean specific force.
     */
    public void setBeforeMeanFz(final double beforeMeanFz) {
<span class="fc" id="L397">        this.beforeMeanFz = beforeMeanFz;</span>
<span class="fc" id="L398">    }</span>

    /**
     * Sets coordinates of mean specific force during the static period
     * happening right before this sequence was measured. Expressed in
     * meters per squared second (m/s^2).
     *
     * @param beforeMeanFx x-coordinate of mean specific force.
     * @param beforeMeanFy y-coordinate of mean specific force.
     * @param beforeMeanFz z-coordinate of mean specific force.
     */
    public void setBeforeMeanSpecificForceCoordinates(
            final double beforeMeanFx, final double beforeMeanFy, final double beforeMeanFz) {
<span class="fc" id="L411">        this.beforeMeanFx = beforeMeanFx;</span>
<span class="fc" id="L412">        this.beforeMeanFy = beforeMeanFy;</span>
<span class="fc" id="L413">        this.beforeMeanFz = beforeMeanFz;</span>
<span class="fc" id="L414">    }</span>

    /**
     * Gets x-coordinate of mean specific force during the static period
     * happening right before this sequence was measured.
     *
     * @param result x-coordinate of mean specific force.
     */
    public void getBeforeMeanSpecificForceX(final Acceleration result) {
<span class="fc" id="L423">        result.setValue(beforeMeanFx);</span>
<span class="fc" id="L424">        result.setUnit(AccelerationUnit.METERS_PER_SQUARED_SECOND);</span>
<span class="fc" id="L425">    }</span>

    /**
     * Gets x-coordinate of mean specific force during the static period
     * happening right before this sequence was measured.
     *
     * @return x-coordinate of mean specific force.
     */
    public Acceleration getBeforeMeanSpecificForceX() {
<span class="fc" id="L434">        return new Acceleration(beforeMeanFx, AccelerationUnit.METERS_PER_SQUARED_SECOND);</span>
    }

    /**
     * Sets x-coordinate of mean specific force during the static period
     * happening right before this sequence was measured.
     *
     * @param beforeMeanSpecificForceX x-coordinate of mean specific force.
     */
    public void setBeforeMeanSpecificForceX(final Acceleration beforeMeanSpecificForceX) {
<span class="fc" id="L444">        beforeMeanFx = convertAcceleration(beforeMeanSpecificForceX);</span>
<span class="fc" id="L445">    }</span>

    /**
     * Gets y-coordinate of mean specific force during the static period
     * happening right before this sequence was measured.
     *
     * @param result y-coordinate of mean specific force.
     */
    public void getBeforeMeanSpecificForceY(final Acceleration result) {
<span class="fc" id="L454">        result.setValue(beforeMeanFy);</span>
<span class="fc" id="L455">        result.setUnit(AccelerationUnit.METERS_PER_SQUARED_SECOND);</span>
<span class="fc" id="L456">    }</span>

    /**
     * Gets y-coordinate of mean specific force during the static period
     * happening right before this sequence was measured.
     *
     * @return y-coordinate of mean specific force.
     */
    public Acceleration getBeforeMeanSpecificForceY() {
<span class="fc" id="L465">        return new Acceleration(beforeMeanFy, AccelerationUnit.METERS_PER_SQUARED_SECOND);</span>
    }

    /**
     * Sets y-coordinate of mean specific force during the static period
     * happening right before this sequence was measured.
     *
     * @param beforeMeanSpecificForceY y-coordinate of mean specific force.
     */
    public void setBeforeMeanSpecificForceY(final Acceleration beforeMeanSpecificForceY) {
<span class="fc" id="L475">        beforeMeanFy = convertAcceleration(beforeMeanSpecificForceY);</span>
<span class="fc" id="L476">    }</span>

    /**
     * Gets z-coordinate of mean specific force during the static period
     * happening right before this sequence was measured.
     *
     * @param result z-coordinate of mean specific force.
     */
    public void getBeforeMeanSpecificForceZ(final Acceleration result) {
<span class="fc" id="L485">        result.setValue(beforeMeanFz);</span>
<span class="fc" id="L486">        result.setUnit(AccelerationUnit.METERS_PER_SQUARED_SECOND);</span>
<span class="fc" id="L487">    }</span>

    /**
     * Gets z-coordinate of mean specific force during the static period
     * happening right before this sequence was measured.
     *
     * @return z-coordinate of mean specific force.
     */
    public Acceleration getBeforeMeanSpecificForceZ() {
<span class="fc" id="L496">        return new Acceleration(beforeMeanFz, AccelerationUnit.METERS_PER_SQUARED_SECOND);</span>
    }

    /**
     * Sets z-coordinate of mean specific force during the static period
     * happening right before this sequence was measured.
     *
     * @param beforeMeanSpecificForceZ z-coordinate of mean specific force.
     */
    public void setBeforeMeanSpecificForceZ(final Acceleration beforeMeanSpecificForceZ) {
<span class="fc" id="L506">        beforeMeanFz = convertAcceleration(beforeMeanSpecificForceZ);</span>
<span class="fc" id="L507">    }</span>

    /**
     * Sets coordinates of mean specific force during the static period
     * happening right before this sequence was measured.
     *
     * @param beforeMeanSpecificForceX x-coordinate of mean specific force.
     * @param beforeMeanSpecificForceY y-coordinate of mean specific force.
     * @param beforeMeanSpecificForceZ z-coordinate of mean specific force.
     */
    public void setBeforeMeanSpecificForceCoordinates(
            final Acceleration beforeMeanSpecificForceX, final Acceleration beforeMeanSpecificForceY,
            final Acceleration beforeMeanSpecificForceZ) {
<span class="fc" id="L520">        setBeforeMeanSpecificForceX(beforeMeanSpecificForceX);</span>
<span class="fc" id="L521">        setBeforeMeanSpecificForceY(beforeMeanSpecificForceY);</span>
<span class="fc" id="L522">        setBeforeMeanSpecificForceZ(beforeMeanSpecificForceZ);</span>
<span class="fc" id="L523">    }</span>

    /**
     * Gets x-coordinate of mean specific force during the static period
     * happening right after this sequence was measured. Expressed in
     * meters per squared second (m/s^2).
     *
     * @return x-coordinate of mean specific force.
     */
    public double getAfterMeanFx() {
<span class="fc" id="L533">        return afterMeanFx;</span>
    }

    /**
     * Sets x-coordinate of mean specific force during the static period
     * happening right after this sequence was measured. Expressed in
     * meters per squared second (m/s^2).
     *
     * @param afterMeanFx x-coordinate of mean specific force.
     */
    public void setAfterMeanFx(final double afterMeanFx) {
<span class="fc" id="L544">        this.afterMeanFx = afterMeanFx;</span>
<span class="fc" id="L545">    }</span>

    /**
     * Gets y-coordinate of mean specific force during the static period
     * happening right after this sequence was measured. Expressed in
     * meters per squared second (m/s^2).
     *
     * @return y-coordinate of mean specific force.
     */
    public double getAfterMeanFy() {
<span class="fc" id="L555">        return afterMeanFy;</span>
    }

    /**
     * Sets y-coordinate of mean specific force during the static period
     * happening right after this sequence was measured. Expressed in
     * meters per squared second (m/s^2).
     *
     * @param afterMeanFy y-coordinate of mean specific force.
     */
    public void setAfterMeanFy(final double afterMeanFy) {
<span class="fc" id="L566">        this.afterMeanFy = afterMeanFy;</span>
<span class="fc" id="L567">    }</span>

    /**
     * Gets z-coordinate of mean specific force during the static period
     * happening right after this sequence was measured. Expressed in
     * meters per squared second (m/s^2).
     *
     * @return z-coordinate of mean specific force.
     */
    public double getAfterMeanFz() {
<span class="fc" id="L577">        return afterMeanFz;</span>
    }

    /**
     * Sets z-coordinate of mean specific force during the static period
     * happening right after this sequence was measured. Expressed in
     * meters per squared second (m/s^2).
     *
     * @param afterMeanFz z-coordinate of mean specific force.
     */
    public void setAfterMeanFz(final double afterMeanFz) {
<span class="fc" id="L588">        this.afterMeanFz = afterMeanFz;</span>
<span class="fc" id="L589">    }</span>

    /**
     * Sets coordinates of mean specific force during the static period
     * happening right after this sequence was measured. Expressed in
     * meters per squared second (m/s^2).
     *
     * @param afterMeanFx x-coordinate of mean specific force.
     * @param afterMeanFy y-coordinate of mean specific force.
     * @param afterMeanFz z-coordinate of mean specific force.
     */
    public void setAfterMeanSpecificForceCoordinates(
            final double afterMeanFx, final double afterMeanFy, final double afterMeanFz) {
<span class="fc" id="L602">        this.afterMeanFx = afterMeanFx;</span>
<span class="fc" id="L603">        this.afterMeanFy = afterMeanFy;</span>
<span class="fc" id="L604">        this.afterMeanFz = afterMeanFz;</span>
<span class="fc" id="L605">    }</span>

    /**
     * Gets x-coordinate of mean specific force during the static period
     * happening right after this sequence was measured.
     *
     * @param result x-coordinate of mean specific force.
     */
    public void getAfterMeanSpecificForceX(final Acceleration result) {
<span class="fc" id="L614">        result.setValue(afterMeanFx);</span>
<span class="fc" id="L615">        result.setUnit(AccelerationUnit.METERS_PER_SQUARED_SECOND);</span>
<span class="fc" id="L616">    }</span>

    /**
     * Gets x-coordinate of mean specific force during the static period
     * happening right after this sequence was measured.
     *
     * @return x-coordinate of mean specific force.
     */
    public Acceleration getAfterMeanSpecificForceX() {
<span class="fc" id="L625">        return new Acceleration(afterMeanFx, AccelerationUnit.METERS_PER_SQUARED_SECOND);</span>
    }

    /**
     * Sets x-coordinate of mean specific force during the static period
     * happening right after this sequence was measured.
     *
     * @param afterMeanSpecificForceX x-coordinate of mean specific force.
     */
    public void setAfterMeanSpecificForceX(final Acceleration afterMeanSpecificForceX) {
<span class="fc" id="L635">        afterMeanFx = convertAcceleration(afterMeanSpecificForceX);</span>
<span class="fc" id="L636">    }</span>

    /**
     * Gets y-coordinate of mean specific force during the static period
     * happening right after this sequence was measured.
     *
     * @param result y-coordinate of mean specific force.
     */
    public void getAfterMeanSpecificForceY(final Acceleration result) {
<span class="fc" id="L645">        result.setValue(afterMeanFy);</span>
<span class="fc" id="L646">        result.setUnit(AccelerationUnit.METERS_PER_SQUARED_SECOND);</span>
<span class="fc" id="L647">    }</span>

    /**
     * Gets y-coordinate of mean specific force during the static period
     * happening right after this sequence was measured.
     *
     * @return y-coordinate of mean specific force.
     */
    public Acceleration getAfterMeanSpecificForceY() {
<span class="fc" id="L656">        return new Acceleration(afterMeanFy, AccelerationUnit.METERS_PER_SQUARED_SECOND);</span>
    }

    /**
     * Sets y-coordinate of mean specific force during the static period
     * happening right after this sequence was measured.
     *
     * @param afterMeanSpecificForceY y-coordinate of mean specific force.
     */
    public void setAfterMeanSpecificForceY(final Acceleration afterMeanSpecificForceY) {
<span class="fc" id="L666">        afterMeanFy = convertAcceleration(afterMeanSpecificForceY);</span>
<span class="fc" id="L667">    }</span>

    /**
     * Gets z-coordinate of mean specific force during the static period
     * happening right after this sequence was measured.
     *
     * @param result z-coordinate of mean specific force.
     */
    public void getAfterMeanSpecificForceZ(final Acceleration result) {
<span class="fc" id="L676">        result.setValue(afterMeanFz);</span>
<span class="fc" id="L677">        result.setUnit(AccelerationUnit.METERS_PER_SQUARED_SECOND);</span>
<span class="fc" id="L678">    }</span>

    /**
     * Gets z-coordinate of mean specific force during the static period
     * happening right after this sequence was measured.
     *
     * @return z-coordinate of mean specific force.
     */
    public Acceleration getAfterMeanSpecificForceZ() {
<span class="fc" id="L687">        return new Acceleration(afterMeanFz, AccelerationUnit.METERS_PER_SQUARED_SECOND);</span>
    }

    /**
     * Sets z-coordinate of mean specific force during the static period
     * happening right after this sequence was measured.
     *
     * @param afterMeanSpecificForceZ z-coordinate of mean specific force.
     */
    public void setAfterMeanSpecificForceZ(final Acceleration afterMeanSpecificForceZ) {
<span class="fc" id="L697">        afterMeanFz = convertAcceleration(afterMeanSpecificForceZ);</span>
<span class="fc" id="L698">    }</span>

    /**
     * Sets coordinates of mean specific force during the static period
     * happening right after this sequence was measured.
     *
     * @param afterMeanSpecificForceX x-coordinate of mean specific force.
     * @param afterMeanSpecificForceY y-coordinate of mean specific force.
     * @param afterMeanSpecificForceZ z-coordinate of mean specific force.
     */
    public void setAfterMeanSpecificForceCoordinates(
            final Acceleration afterMeanSpecificForceX, final Acceleration afterMeanSpecificForceY,
            final Acceleration afterMeanSpecificForceZ) {
<span class="fc" id="L711">        setAfterMeanSpecificForceX(afterMeanSpecificForceX);</span>
<span class="fc" id="L712">        setAfterMeanSpecificForceY(afterMeanSpecificForceY);</span>
<span class="fc" id="L713">        setAfterMeanSpecificForceZ(afterMeanSpecificForceZ);</span>
<span class="fc" id="L714">    }</span>

    /**
     * Copies data of provided instance into this instance.
     *
     * @param input instance to copy data from.
     */
    public void copyFrom(final BodyKinematicsSequence&lt;T&gt; input) {
<span class="fc bfc" id="L722" title="All 2 branches covered.">        if (input.items != null) {</span>
<span class="fc" id="L723">            items = cloneList(input.items);</span>
        } else {
<span class="fc" id="L725">            items = null;</span>
        }
<span class="fc bfc" id="L727" title="All 2 branches covered.">        if (input.sortedItems != null) {</span>
<span class="fc" id="L728">            sortedItems = cloneList(input.sortedItems);</span>
        } else {
<span class="fc" id="L730">            sortedItems = null;</span>
        }

<span class="fc" id="L733">        beforeMeanFx = input.beforeMeanFx;</span>
<span class="fc" id="L734">        beforeMeanFy = input.beforeMeanFy;</span>
<span class="fc" id="L735">        beforeMeanFz = input.beforeMeanFz;</span>

<span class="fc" id="L737">        afterMeanFx = input.afterMeanFx;</span>
<span class="fc" id="L738">        afterMeanFy = input.afterMeanFy;</span>
<span class="fc" id="L739">        afterMeanFz = input.afterMeanFz;</span>
<span class="fc" id="L740">    }</span>

    /**
     * Copies this instance data into provided instance.
     *
     * @param output destination instance where data will be copied to.
     */
    public void copyTo(final BodyKinematicsSequence&lt;T&gt; output) {
<span class="fc" id="L748">        output.copyFrom(this);</span>
<span class="fc" id="L749">    }</span>

    /***
     * Checks if provided instance is a BodyKinematicsSequence2 having exactly
     * the same contents as this instance.
     *
     * @param o object to be compared.
     * @return true if both objects are considered to be equal, false otherwise.
     */
    @Override
    public boolean equals(Object o) {
<span class="pc bpc" id="L760" title="1 of 2 branches missed.">        if (this == o) {</span>
<span class="nc" id="L761">            return true;</span>
        }
<span class="pc bpc" id="L763" title="2 of 4 branches missed.">        if (o == null || getClass() != o.getClass()) {</span>
<span class="nc" id="L764">            return false;</span>
        }

<span class="fc" id="L767">        final var that = (BodyKinematicsSequence&lt;?&gt;) o;</span>
<span class="fc bfc" id="L768" title="All 2 branches covered.">        return Double.compare(that.beforeMeanFx, beforeMeanFx) == 0 &amp;&amp;</span>
<span class="pc bpc" id="L769" title="1 of 2 branches missed.">                Double.compare(that.beforeMeanFy, beforeMeanFy) == 0 &amp;&amp;</span>
<span class="pc bpc" id="L770" title="1 of 2 branches missed.">                Double.compare(that.beforeMeanFz, beforeMeanFz) == 0 &amp;&amp;</span>
<span class="pc bpc" id="L771" title="1 of 2 branches missed.">                Double.compare(that.afterMeanFx, afterMeanFx) == 0 &amp;&amp;</span>
<span class="pc bpc" id="L772" title="1 of 2 branches missed.">                Double.compare(that.afterMeanFy, afterMeanFy) == 0 &amp;&amp;</span>
<span class="pc bpc" id="L773" title="1 of 2 branches missed.">                Double.compare(that.afterMeanFz, afterMeanFz) == 0 &amp;&amp;</span>
<span class="pc bpc" id="L774" title="1 of 2 branches missed.">                Objects.equals(items, that.items) &amp;&amp;</span>
<span class="pc bpc" id="L775" title="1 of 2 branches missed.">                Objects.equals(sortedItems, that.sortedItems);</span>
    }

    /**
     * Computes and returns hash code for this instance. Hash codes are almost unique
     * values that are useful for fast classification and storage of objects in collections.
     *
     * @return Hash code.
     */
    @Override
    public int hashCode() {
<span class="fc" id="L786">        return Objects.hash(items, sortedItems, beforeMeanFx, beforeMeanFy, beforeMeanFz,</span>
<span class="fc" id="L787">                afterMeanFx, afterMeanFy, afterMeanFz);</span>
    }

    /**
     * Makes a copy of this instance.
     *
     * @return a copy of this instance.
     * @throws CloneNotSupportedException if clone fails for some reason.
     */
    @Override
    protected Object clone() throws CloneNotSupportedException {
        //noinspection unchecked
<span class="fc" id="L799">        final var result = (BodyKinematicsSequence&lt;T&gt;) super.clone();</span>
<span class="fc" id="L800">        copyTo(result);</span>
<span class="fc" id="L801">        return result;</span>
    }

    /**
     * Clones a list of {@link TimedBodyKinematics}.
     *
     * @param list list to be cloned.
     * @return cloned list.
     */
    @SuppressWarnings(&quot;unchecked&quot;)
    private ArrayList&lt;T&gt; cloneList(final List&lt;T&gt; list) {
        // constructor with list only creates a new list containing the
        // same instances as the original list.
        // ArrayList is publicly Cloneable, so we clone it to get copies
        // of the elements contained within.

<span class="fc" id="L817">        final var result = new ArrayList&lt;T&gt;();</span>
<span class="fc bfc" id="L818" title="All 2 branches covered.">        for (final var item : list) {</span>
<span class="pc bpc" id="L819" title="1 of 2 branches missed.">            if (item instanceof StandardDeviationTimedBodyKinematics) {</span>
<span class="fc" id="L820">                final var newItem = new StandardDeviationTimedBodyKinematics();</span>
<span class="fc" id="L821">                newItem.copyFrom(item);</span>
<span class="fc" id="L822">                result.add((T) newItem);</span>
<span class="fc" id="L823">            } else {</span>
<span class="nc" id="L824">                final var newItem = new TimedBodyKinematics(item);</span>
<span class="nc" id="L825">                result.add((T) newItem);</span>
            }
<span class="fc" id="L827">        }</span>

<span class="fc" id="L829">        return result;</span>
    }

    /**
     * Converts an acceleration instance into its corresponding value
     * expressed in meters per squared second.
     *
     * @param acceleration an acceleration to be converted.
     * @return converted value.
     */
    private static double convertAcceleration(final Acceleration acceleration) {
<span class="fc" id="L840">        return AccelerationConverter.convert(acceleration.getValue().doubleValue(),</span>
<span class="fc" id="L841">                acceleration.getUnit(), AccelerationUnit.METERS_PER_SQUARED_SECOND);</span>
    }
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.11.202310140853</span></div></body></html>